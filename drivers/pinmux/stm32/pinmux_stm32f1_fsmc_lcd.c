/*
 * Copyright (c) 2016 Open-RnD Sp. z o.o.
 *
 * SPDX-License-Identifier: Apache-2.0
 */

#include <kernel.h>
#include <device.h>
#include <init.h>
#include <pinmux.h>
#include <sys_io.h>
#include "pinmux/pinmux.h"

#include "pinmux_stm32.h"

/* pin assignments for NUCLEO-F103RB board */
static const struct pin_config pinconf[] = {
#if defined(CONFIG_STM32F1X_FSMC_LCD)
	{STM32_PIN_PB0,  STM32F1_PINMUX_FUNC_PB0_FSMC_LED},
	{STM32_PIN_PD0,  STM32F1_PINMUX_FUNC_PD0_FSMC_LCD},
	{STM32_PIN_PD1,  STM32F1_PINMUX_FUNC_PD1_FSMC_LCD},
	{STM32_PIN_PD4,  STM32F1_PINMUX_FUNC_PD4_FSMC_LCD},
	{STM32_PIN_PD5,  STM32F1_PINMUX_FUNC_PD5_FSMC_LCD},
	{STM32_PIN_PD8,  STM32F1_PINMUX_FUNC_PD8_FSMC_LCD},
	{STM32_PIN_PD9,  STM32F1_PINMUX_FUNC_PD9_FSMC_LCD},
	{STM32_PIN_PD10,  STM32F1_PINMUX_FUNC_PD10_FSMC_LCD},
	{STM32_PIN_PD14,  STM32F1_PINMUX_FUNC_PD14_FSMC_LCD},
	{STM32_PIN_PD15,  STM32F1_PINMUX_FUNC_PD15_FSMC_LCD},
	{STM32_PIN_PE7,  STM32F1_PINMUX_FUNC_PE7_FSMC_LCD},
	{STM32_PIN_PE8,  STM32F1_PINMUX_FUNC_PE8_FSMC_LCD},
	{STM32_PIN_PE9,  STM32F1_PINMUX_FUNC_PE9_FSMC_LCD},
	{STM32_PIN_PE10,  STM32F1_PINMUX_FUNC_PE10_FSMC_LCD},
	{STM32_PIN_PE11,  STM32F1_PINMUX_FUNC_PE11_FSMC_LCD},
	{STM32_PIN_PE12,  STM32F1_PINMUX_FUNC_PE12_FSMC_LCD},
	{STM32_PIN_PE13,  STM32F1_PINMUX_FUNC_PE13_FSMC_LCD},
	{STM32_PIN_PE14,  STM32F1_PINMUX_FUNC_PE14_FSMC_LCD},
	{STM32_PIN_PE15,  STM32F1_PINMUX_FUNC_PE15_FSMC_LCD},
	{STM32_PIN_PG0,  STM32F1_PINMUX_FUNC_PG0_FSMC_LCD},
	{STM32_PIN_PG12,  STM32F1_PINMUX_FUNC_PG12_FSMC_LCD},
#endif	/* CONFIG_STM32_FSMC_LCD */
};

static int pinmux_stm32_init(struct device *port)
{
	ARG_UNUSED(port);

	stm32_setup_pins(pinconf, ARRAY_SIZE(pinconf));

	return 0;
}

SYS_INIT(pinmux_stm32_init, PRE_KERNEL_1,
	 CONFIG_PINMUX_STM32_DEVICE_INITIALIZATION_PRIORITY);
